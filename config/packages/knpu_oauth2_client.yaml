knpu_oauth2_client:
    clients:
        # On appellera ce client "azure" dans notre code
        azure:
            type: generic
            provider_class: TheNetworg\OAuth2\Client\Provider\Azure

            # Ces identifiants viendront de ton fichier .env
            client_id: '%env(OAUTH_AZURE_CLIENT_ID)%'
            client_secret: '%env(OAUTH_AZURE_CLIENT_SECRET)%'

            # L'URL où Microsoft renvoie l'utilisateur après connexion
            redirect_route: connect_microsoft_check
            redirect_params: {}

            # Options spécifiques à Microsoft
            provider_options:
                # 'common' permet à n'importe quel compte Microsoft de se connecter
                # Si tu voulais limiter à ton entreprise, tu mettrais l'ID de ton Tenant ici
                tenant: 'common'

                # Les permissions qu'on va demander tout de suite
                # openid, profile, email, offline_access (pour le refresh token)
                # On ajoutera Calendars.ReadWrite plus tard
                scope: 'openid profile email offline_access https://graph.microsoft.com/Calendars.ReadWrite'
